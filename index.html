<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clicker Game Siêu Nghiện - Có Thợ Bánh!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="authContainer" style="display: none;"> <!-- Thêm style display: none ở đây -->
        <h2>Đăng Nhập / Đăng Ký</h2>
        <input type="email" id="emailInput" placeholder="Email"> <!-- Thay đổi thành email -->
        <input type="password" id="passwordInput" placeholder="Mật khẩu">
        <button id="loginButton">Đăng Nhập</button>
        <button id="registerButton">Đăng Ký</button>
        <p id="authMessage"></p>
    </div>

    <div class="main-game-area" style="display: flex; align-items: flex-start;"> <!-- Wrapper cho game và leaderboard -->
        <div id="leaderboardPopup" class="leaderboard-popup" style="display: none;">
            <h2>🏆 Bảng Xếp Hạng 🏆</h2>
            <ol id="leaderboardList">
                <!-- Người chơi sẽ được thêm vào đây bằng JavaScript -->
            </ol>
        </div>

        <div class="container" style="display: none; margin-left: 20px;"> <!-- Game container initially hidden -->
            <div id="userSession" style="display: none;">
                <p>Xin chào, <span id="loggedInUser"></span>! <button id="logoutButton">Đăng Xuất</button></p>
            </div>
            <h1 id="gameTitle">Game nướng bánh - Đợi lương</h1> <!-- Thêm id="gameTitle" -->

            <div class="stats">
                <p>🍪 Bánh Quy: <span id="currencyDisplay">0</span></p>
                <p>Bánh quy / giây: <span id="cpsDisplay">0</span></p>
                <p>Sức mạnh click: <span id="clickPowerDisplay">1</span></p>
            </div>

            <div class="baker-area">
                <img id="bakerImage" src="giphy.gif" alt="Thợ làm bánh đang nướng bánh">
            </div>

            <div class="click-area">
                <button id="clickButton" class="click-button">Nướng Bánh!</button>
            </div>

            <h2>Nâng Cấp Tiệm Bánh</h2>
            <div class="upgrade-tabs-container">
                <div class="upgrade-tabs">
                    <button class="tab-link active" data-tab="nhanCong">👨‍🍳 Nhân Công</button>
                    <button class="tab-link" data-tab="thietBi">🛠️ Thiết Bị</button>
                    <button class="tab-link" data-tab="kiNang">✨ Kĩ Năng</button>
                </div>
                <div id="nhanCong" class="tab-content active">
                    <div id="upgradesNhanCongContainer" class="upgrades-container">
                        <!-- Nâng cấp nhân công sẽ ở đây -->
                    </div>
                </div>
                <div id="thietBi" class="tab-content">
                    <div id="upgradesThietBiContainer" class="upgrades-container">
                        <!-- Nâng cấp thiết bị sẽ ở đây -->
                    </div>
                </div>
                <div id="kiNang" class="tab-content">
                    <div id="upgradesKiNangContainer" class="upgrades-container">
                        <!-- Nâng cấp kĩ năng sẽ ở đây -->
                    </div>
                </div>
            </div>

            <button id="saveButton">Lưu Game</button>
            <button id="loadButton">Tải Game</button>
            <button id="resetButton">Chơi Lại Từ Đầu</button>
        </div>

        <div id="commentsSection" class="comments-section" style="display: none; margin-left: 20px;">
            <h2>💬 Bình Luận 💬</h2>
            <div id="commentsList">
                <!-- Bình luận sẽ được thêm vào đây -->
            </div>
            <div class="comment-input-area">
                <input type="text" id="commentInput" placeholder="Viết bình luận...">
                <button id="sendCommentButton">Gửi</button>
            </div>
        </div>
    </div>

    <!-- Popup để xem tiệm bánh của người khác -->
    <div id="visitorBakeryPopup" class="visitor-popup"> <!-- Xóa style="display: none;" -->
        <div class="visitor-popup-content">
            <button id="closeVisitorPopupButton" class="close-button">&times;</button>
            <h2 id="visitorBakeryName">Tiệm bánh của...</h2>
            <div class="stats">
                <p>🍪 Bánh Quy: <span id="visitorCurrencyDisplay">0</span></p>
                <p>Bánh quy / giây: <span id="visitorCpsDisplay">0</span></p>
                <p>Sức mạnh click: <span id="visitorClickPowerDisplay">1</span></p>
            </div>
            <h3>Các Nâng Cấp Đã Mua:</h3>
            <ul id="visitorUpgradesList">
                <!-- Nâng cấp của người được thăm sẽ hiển thị ở đây -->
            </ul>
            <button id="stealCookiesButton" class="steal-button">Ăn Cắp Bánh!</button>
            <p id="stealResultDisplay" class="steal-result"></p>
        </div>
    </div>

    <!-- Popup hiển thị kết quả ăn cắp -->
    <div id="stealNotificationPopup" class="steal-notification-popup">
        <div class="steal-notification-content">
            <p id="stealNotificationMessage"></p>
            <button id="closeStealNotificationButton">OK</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script src="script.js"></script>

</body>
</html>